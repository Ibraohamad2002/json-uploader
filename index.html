<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student JSON Uploader</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="font-family: sans-serif; padding: 20px;">
  <h2>üì§ Upload JSON File</h2>
  <input type="file" id="fileInput" accept=".json" />
  <button id="uploadBtn">Upload</button>

  <p id="msg"></p>

  <script>
    const SUPABASE_URL = 'https://ociaekhyqtiintzguudo.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9jaWFla2h5cXRpaW50emd1dWRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzMjI0OTAsImV4cCI6MjA3Njg5ODQ5MH0.7yeAbnv2KUqaAvbyxr8mRvpG9oALl4k9mmJd3_UmwCU';

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    document.getElementById("uploadBtn").addEventListener("click", async () => {
      const fileInput = document.getElementById("fileInput");
      const msg = document.getElementById("msg");

      if (!fileInput.files.length) {
        msg.textContent = "‚ö†Ô∏è Please choose a file first.";
        return;
      }

      const file = fileInput.files[0];
      const filePath = `uploads/${Date.now()}_${file.name}`;

      msg.textContent = "‚è≥ Uploading...";

      const { data, error } = await supabase.storage.from("uploads").upload(filePath, file);

      if (error) {
        console.error("Upload error:", error);
        msg.textContent = "‚ùå Upload failed: " + error.message;
      } else {
        console.log("‚úÖ Uploaded:", data);
        msg.textContent = "‚úÖ File uploaded successfully!";
      }
    });
  </script>
</body>
</html>

